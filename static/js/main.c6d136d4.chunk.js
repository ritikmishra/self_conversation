(this.webpackJsonpself_conversation=this.webpackJsonpself_conversation||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var s=n(3),c=n.n(s),r=n(46),a=n.n(r),i=(n(54),n(27)),u=n.n(i),o=n(49),f=n(47),l=n(13),j=(n(56),n(48)),b=n.n(j),x=n(141),m=n(11),d=n(2),O=function(e){var t=e.message,n=t.text,c=t.timestamp,r=t.left,a=Object(s.useState)(Object(x.a)(c)),i=Object(l.a)(a,2),u=i[0],o=i[1];return Object(s.useEffect)((function(){setInterval((function(){return o(Object(x.a)(c))}),1e3)}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"message "+(r?"left leftMessage":"right rightMessage"),children:n}),Object(d.jsxs)("span",{className:"timestamp "+(r?"left":"right"),children:[u," ago"]})]})},g=function(){var e=Object(s.useState)(new b.a.Db("textdb",0,{messages:["left"]}).collection("messages")),t=Object(l.a)(e,1)[0],n=Object(s.useState)([]),c=Object(l.a)(n,2),r=c[0],a=c[1],i=Object(s.useState)(""),j=Object(l.a)(i,2),x=j[0],g=j[1],h=Object(s.useRef)(null),v=Object(s.useRef)(null);Object(s.useEffect)((function(){t.find({}).toArray().then((function(e){e.sort((function(e,t){var n=e.timestamp,s=t.timestamp;return Object(m.a)(n,s)})),a(e)}))}),[]),Object(s.useEffect)((function(){var e;return null===(e=v.current)||void 0===e?void 0:e.focus()}),[]),Object(s.useEffect)((function(){var e;return null===(e=h.current)||void 0===e?void 0:e.scrollIntoView()}),[r]);var p=function(){var e=Object(f.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n.trim()){e.next=3;break}return e.abrupt("return");case 3:return s={_id:"xxxxxxxxxxxxxx".replace(/x/gi,(function(){return Math.floor(36*Math.random()).toString(36)})),timestamp:Date.now(),left:r.length%2===0,text:n},e.next=6,t.insert(s);case 6:a([].concat(Object(o.a)(r),[s]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){p(x),setTimeout((function(){return g("")}))};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("div",{className:"messages",children:[r.map((function(e){return Object(d.jsx)(O,{message:e},e._id)})),Object(d.jsx)("div",{ref:h})," "]}),Object(d.jsx)("div",{className:"footer",children:Object(d.jsxs)("div",{className:"submitArea",children:[Object(d.jsx)("textarea",{className:"submitTextArea",ref:v,value:x,placeholder:"What are you going to say to yourself?",onChange:function(e){return g(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&y()}}),Object(d.jsx)("button",{className:"submitButton",onClick:y,children:"Add Message"})]})})]})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),r(e),a(e)}))};a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root")),h()},54:function(e,t,n){},56:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.c6d136d4.chunk.js.map